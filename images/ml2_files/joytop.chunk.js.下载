webpackJsonp([14],{125:function(t,n,e){function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},i=function(){function defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,n,e){return n&&defineProperties(t.prototype,n),e&&defineProperties(t,e),t}}(),r=e(0),a=function(t){return t&&t.__esModule?t:{"default":t}}(r),l=e(1),s=e(5),c=e(3),p=e(6);e(241);var u=String((new Date).getDate()),f=function(t){function Joytop(t){_classCallCheck(this,Joytop);var n=_possibleConstructorReturn(this,(Joytop.__proto__||Object.getPrototypeOf(Joytop)).call(this,t));return n.isHidden=!1,n.containerDom=null,n.timer=null,n.poi="head|adtop",n.validateData=function(t){return new Promise(function(n,e){var o=t.data,i=new Error("Data check fail"),r=function(){function isEntryInvalid(t){t.img&&t.url||e(i)}return isEntryInvalid}();o||e(i),o.img&&o.imgW&&o.url||e(i),(!Array.isArray(o.entryList)||o.entryList.length<2)&&e(i),o.entryList.some(r)&&e(i),n(t)})},n.processData=function(t){var e=t.data,i={isLoaded:!0,isExpand:!1,url:e.url,entryList:e.entryList,bgColor:e.bgColor},r=l.isWide?e.imgW:e.img;e.imgEx&&e.imgWEx&&l.o2Control.get("lastvisit")!==u?(i.isExpand=!0,l.o2Control.set("lastvisit",u),i.img=l.isWide?e.imgWEx:e.imgEx,i.poi=n.poi+"|01a"):(i.img=r,i.poi=n.poi+"|0101");var a=e.ext_columns||{},c=o({poi:n.poi+"|0101",url:i.url},a,{comment:"多坑位顶通 - 主会场"});i.onClickMain=function(){(0,s.logClick)(c)},(0,s.logImpr)(c),i.entryList.forEach(function(t,e){t.poi=n.poi+"|01"+(0,l.padding)(2+e,2);var i=o({poi:t.poi,url:t.url},t.ext_columns,{comment:"多坑位顶通 - 分会场"});t.onClickEntry=function(){(0,s.logClick)(i)},(0,s.logImpr)(i)}),n.setState(i),n.requestShrink(r)},n.containerRef=function(t){var e=(0,r.findDOMNode)(t);n.containerDom=e},n.hide=function(){n.isHidden=!0,n.forceUpdate()},n.onClickClose=function(){n.timer&&clearTimeout(n.timer);var t=n.state.isExpand;n.containerDom.className=(0,l.mergeClassName)("joytop",t?"joytop_ex":"","joytop_fade"),setTimeout(function(){n.hide()},300)},n.state={isLoaded:!1,isExpand:!1,url:"",img:"",poi:"",bgColor:"#fff",entryList:[],onClickMain:function(){function onClickMain(){}return onClickMain}()},n}return _inherits(Joytop,t),i(Joytop,[{key:"requestShrink",value:function(){function requestShrink(t){var n=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){n.setState({isExpand:!1,img:t,poi:n.poi+"|0101"})},3e3)}return requestShrink}()},{key:"fetchData",value:function(){function fetchData(){return(0,l.loadAsync)({url:c.APIS.JOYTOP,name:"jsonpJoytop",params:{pin:p.USER.pin,uuid:p.USER.uuid},backup:c.APIS.JOYTOP_BAK})}return fetchData}()},{key:"componentDidMount",value:function(){function componentDidMount(){var t=this;this.fetchData().then(this.validateData).then(this.processData)["catch"](function(n){l.dconsole.log(n),t.hide(),$("#J_event").css({display:"block"})})}return componentDidMount}()},{key:"render",value:function(){function render(){if(this.isHidden)return"";var t=this.state,n=t.isLoaded,e=t.isExpand,o=t.url,i=t.img,r=t.poi,s=t.onClickMain,p=t.bgColor,u=t.entryList;if(!n)return a["default"].createElement("div",{className:"joytop mod_lazyload"});var f=(0,l.mergeClassName)("joytop",e?"joytop_ex":""),d=e?"":u.map(function(t){return a["default"].createElement("li",{className:"joytop_item"},a["default"].createElement("a",{className:"joytop_item_lk",href:t.url,clstag:c.CONSTS.CLSTAGPREFIX+"|"+t.poi,onclick:t.onClickEntry,target:"_blank"},a["default"].createElement("img",{src:t.img})))});return a["default"].createElement("div",{className:f,ref:this.containerRef,style:{backgroundColor:p}},a["default"].createElement("div",{className:"grid_c1 joytop_inner"},a["default"].createElement("a",{className:"joytop_lk",href:o,target:"_blank",clstag:c.CONSTS.CLSTAGPREFIX+"|"+r,onclick:s,style:{backgroundImage:"url("+i+")"}},a["default"].createElement("i",{className:"mod_actmark mod_actmark_top joytop_mark"})),a["default"].createElement("ul",{className:"joytop_list"},d),a["default"].createElement("i",{className:"iconfont joytop_close",onclick:this.onClickClose},"")))}return render}()}]),Joytop}(r.Component);n["default"]=f},241:function(t,n,e){var o=e(242);"string"==typeof o&&(o=[[t.i,o,""]]);var i={};i.transform=void 0;e(8)(o,i);o.locals&&(t.exports=o.locals)},242:function(t,n,e){n=t.exports=e(7)(undefined),n.push([t.i,".joytop {\n  position: relative;\n  z-index: 30;\n  -webkit-transition: opacity 0.35s linear;\n  -o-transition: opacity 0.35s linear;\n  -moz-transition: opacity 0.35s linear;\n  transition: opacity 0.35s linear; }\n\n.joytop_inner {\n  position: relative; }\n\n.joytop_lk {\n  display: block;\n  width: 100%;\n  height: 80px;\n  background-repeat: no-repeat;\n  background-position: 50% 0;\n  -webkit-transition: height 0.2s linear;\n  -o-transition: height 0.2s linear;\n  -moz-transition: height 0.2s linear;\n  transition: height 0.2s linear; }\n\n.joytop_ex .joytop_lk {\n  height: 200px; }\n\n.joytop_fade {\n  opacity: 0; }\n\n.joytop_close {\n  cursor: pointer;\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  font-weight: bold;\n  font-size: 14px;\n  color: #fff;\n  background: #2d2d2d;\n  opacity: 0.3;\n  filter: alpha(opacity=30);\n  width: 20px;\n  text-align: center;\n  line-height: 20px; }\n\n.joytop_list {\n  position: absolute;\n  top: 15px;\n  left: 910px;\n  width: 300px; }\n\n.o2_mini .joytop_list {\n  top: 15px;\n  left: 740px; }\n\n.joytop_item {\n  float: left;\n  width: 116px;\n  height: 46px;\n  margin-right: 10px; }\n\n.joytop_item_lk {\n  display: block;\n  width: 100%;\n  height: 100%; }\n",""])}});